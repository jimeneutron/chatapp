<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ChatterChat</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#121212">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
/* =======================
   VIEWPORT â€” CORRECT WAY
   ======================= */
:root {
  --vh: 100vh;
}
@supports (height: 100dvh) {
  :root { --vh: 100dvh; }
}

html, body {
  margin: 0;
  height: 100%;
  overflow: hidden;
  background: #121212;
  color: #e0e0e0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

/* =======================
   APP LAYOUT
   ======================= */
.chat-container {
  display: flex;
  height: var(--vh);
  max-height: var(--vh);
  width: 100%;
  overflow: hidden;
}

/* =======================
   SIDEBAR (NO SCROLL)
   ======================= */
.sidebar {
  width: 260px;
  background: #1f1f1f;
  padding: 14px;
  overflow: hidden;
  flex-shrink: 0;
  touch-action: none;
}

.sidebar button {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: none;
  background: #2196f3;
  color: #fff;
  font-weight: 700;
  margin-bottom: 10px;
}

#chatList {
  list-style: none;
  padding: 0;
  margin: 0;
}
#chatList li {
  padding: 8px;
  border-radius: 8px;
  cursor: pointer;
}
#chatList li:hover {
  background: #2a2a2a;
}

/* =======================
   CHAT COLUMN
   ======================= */
.chat-main {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  background: #181818;
  height: 100%;
}

/* header */
.chat-top {
  padding: 10px 16px;
  border-bottom: 1px solid #222;
  flex-shrink: 0;
}

/* =======================
   MESSAGES â€” ONLY SCROLLER
   ======================= */
.messages {
  flex: 1 1 auto;
  min-height: 0; /* REQUIRED */
  padding: 16px;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* messages */
.message {
  max-width: 72%;
  padding: 10px 14px;
  border-radius: 12px;
  word-wrap: break-word;
}
.mine {
  align-self: flex-end;
  background: #4caf50;
  color: #fff;
}
.their {
  align-self: flex-start;
  background: #2c2c2c;
}

.message img {
  max-width: 220px;
  border-radius: 8px;
  margin-top: 6px;
}

/* =======================
   INPUT BAR â€” PINNED
   ======================= */
.input-container {
  display: flex;
  gap: 8px;
  padding: 12px;
  background: #1f1f1f;
  border-top: 1px solid #222;
  flex-shrink: 0; /* IMPORTANT */
}

#messageInput {
  flex: 1;
  padding: 10px;
  border-radius: 8px;
  border: none;
  background: #2c2c2c;
  color: #fff;
}

.attach-btn input { display: none; }
.attach-btn {
  padding: 10px;
  border-radius: 8px;
  background: #444;
  cursor: pointer;
}

/* =======================
   LOGIN
   ======================= */
.login-container {
  width: 320px;
  margin: 48px auto;
  padding: 18px;
  background: #1f1f1f;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.login-container input,
.login-container button {
  padding: 10px;
  border-radius: 8px;
  border: none;
}
.login-container input {
  background: #2c2c2c;
  color: #fff;
}
.login-container button {
  background: #2196f3;
  color: #fff;
  font-weight: 700;
}

/* =======================
   MOBILE
   ======================= */
@media (max-width: 800px) {
  .sidebar { display: none; }
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginDiv" class="login-container">
  <h2>ChatterChat</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button id="loginBtn">Login</button>
  <button id="signupBtn">Sign Up</button>
</div>

<!-- CHAT -->
<div id="chatDiv" class="chat-container" style="display:none;">
  <div class="sidebar">
    <button id="newChatBtn">+ New Chat</button>
    <h3>Chats</h3>
    <ul id="chatList"></ul>
  </div>

  <div class="chat-main">
    <div class="chat-top" id="chatTitle">Global Chat</div>
    <div id="messages" class="messages"></div>

    <div class="input-container">
      <label class="attach-btn">ðŸ“Ž
        <input type="file" id="fileInput">
      </label>
      <input id="messageInput" placeholder="Type a messageâ€¦">
      <button id="sendBtn">Send</button>
    </div>
  </div>
</div>

<!-- Firebase + your existing JS stays unchanged -->
</body>
</html>
